<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemption Details Review - Ark CMS</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
            <img src="../assets/images/ark_logo.png" alt="Ark CMS Logo" class="logo">
            <nav class="sidebar-nav">
                <span class="nav-section-title">[Data Fiduciary Name] - DPO</span>
                <ul>
                    <li><a href="df_dpo_dashboard.html"><span class="material-symbols-outlined">dashboard</span> Dashboard</a></li>
                </ul>
                <!-- ... other nav sections ... -->
                <span class="nav-section-title">Reviews & Records</span>
                 <ul>
                    <li><a href="df_dpo_exemption_review.html" class="active"><span class="material-symbols-outlined">policy</span> Exemption Review</a></li>
                    <li><a href="df_dpo_processor_review.html"><span class="material-symbols-outlined">lan</span> Data Processor Records</a></li>
                </ul>
                <!-- ... other DPO nav items ... -->
                 <div class="sidebar-footer" style="margin-top: auto;">
                     <a href="df_dpo_login.html" class="btn btn-secondary btn-full-width"><span class="material-symbols-outlined">logout</span> Logout</a>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <header class="app-header">
                 <div class="hamburger-menu">
                    <span class="material-symbols-outlined">menu</span>
                </div>
                <h1 class="page-title">Exemption Claim Details - <span id="exemptionIdDisplay">EXM_001</span></h1>
                 <div class="user-menu">
                    <div class="user-menu-trigger">
                        <div class="avatar">PO</div>
                        <span class="user-name-display ark-body-default">[DF DPO Name]</span>
                        <span class="material-symbols-outlined">arrow_drop_down</span>
                    </div>
                    <div class="user-menu-dropdown">
                        <a href="#">My Profile</a>
                        <a href="df_dpo_login.html">Logout</a>
                    </div>
                </div>
            </header>

            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="ark-body-small" style="display: flex; list-style: none; padding: 0;">
                    <li><a href="df_dpo_exemption_review.html" class="ark-link">Exemption Review</a></li>
                    <li class="ark-body-small" style="margin: 0 var(--space-xs); color: var(--ark-gray-500);">></li>
                    <li class="ark-body-small" aria-current="page" id="breadcrumbExemptionId">Exemption EXM_001</li>
                </ol>
            </nav>

            <div class="card mb-4">
                <div class="card-header">
                    <h2 class="ark-h3">Exemption Information</h2>
                </div>
                <div class="card-content">
                    <p><strong>Exemption ID:</strong> <span id="infoExemptionId">EXM_001</span></p>
                    <p><strong>DPDPA Section:</strong> <span id="infoDpdpaSection">Sec 17(1)(a) - Enforcing legal right or claim</span></p>
                    <p><strong>Applied To Type:</strong> <span id="infoAppliedToType">Activity</span></p>
                    <p><strong>Applied To Name/Identifier:</strong> <span id="infoAppliedToName">[Internal Fraud Investigation]</span></p>
                    <p><strong>Documented On:</strong> <span id="infoDocumentedOn">[YYYY-MM-DD]</span></p>
                    <p><strong>Documented By:</strong> <span id="infoDocumentedBy">[DF Admin Name]</span></p>
                    <p><strong>Status:</strong> <span class="badge badge-success" id="infoExemptionStatus">Active</span></p>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h2 class="ark-h3">Justification Provided by DF</h2>
                </div>
                <div class="card-content">
                    <p class="ark-body-default" id="infoJustification">[Investigation of suspected fraudulent activity related to user XYZ. Processing of transaction logs and communication data is necessary to enforce legal claims against the individual and protect company assets. This processing falls outside normal consent scope due to the nature of the investigation.]</p>
                </div>
            </div>

            <div class="card mb-4">
                <form id="dpoCommentsForm">
                    <div class="card-header">
                        <h2 class="ark-h3">DPO Review Comments (Internal)</h2>
                    </div>
                    <div class="card-content">
                        <div class="form-group">
                            <label for="dpoComments" class="ark-label">Your Comments:</label>
                            <textarea id="dpoComments" name="dpoComments" class="form-control" rows="4" placeholder="Add your internal review notes, assessment of validity, or recommendations..."></textarea>
                        </div>
                    </div>
                    <div class="card-footer text-right">
                         <button type="submit" class="btn btn-primary">Save Comments</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="ark-h3">Exemption History (Audit Trail)</h2>
                </div>
                <div class="card-content">
                    <ul class="ark-body-default" style="list-style: none; padding: 0;">
                        <li style="padding: var(--space-sm) 0; border-bottom: 1px solid var(--ark-gray-200);">
                            <strong>Exemption Documented</strong> by [DF Admin Name] - [YYYY-MM-DD HH:MM]
                        </li>
                        <li style="padding: var(--space-sm) 0;">
                            <strong>Status changed to 'Active'</strong> by [DF Admin Name] - [YYYY-MM-DD HH:MM]
                        </li>
                        <!-- More history items -->
                    </ul>
                </div>
            </div>
        </main>
    </div>
    <script src="../assets/js/main.js"></script>
    <script>
        populateUserSpecificElements("DF DPO Name");
        const exemptionIdFromUrl = new URLSearchParams(window.location.search).get('id') || 'EXM_001';
        document.getElementById('exemptionIdDisplay').textContent = exemptionIdFromUrl;
        document.getElementById('breadcrumbExemptionId').textContent = `Exemption ${exemptionIdFromUrl}`;
        document.getElementById('infoExemptionId').textContent = exemptionIdFromUrl;

        // Mock load data based on ID
        if (exemptionIdFromUrl === 'EXM_002') {
            document.getElementById('infoDpdpaSection').textContent = 'Sec 17(1)(c) - Prevention/Detection of Offence';
            document.getElementById('infoAppliedToType').textContent = 'Purpose';
            document.getElementById('infoAppliedToName').textContent = '[Security Monitoring]';
            document.getElementById('infoJustification').textContent = '[Processing logs for identifying security threats and unauthorized access attempts. This is crucial for preventing potential offenses against our systems and data.]';
        }

        document.getElementById('dpoCommentsForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('DPO comments saved (Mock).');
        });
    </script>
</body>
</html>