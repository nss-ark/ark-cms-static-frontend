<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notice Details - Ark CMS</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Rich Text Editor Placeholder - In a real app, this would be a library like Quill or TinyMCE -->
    <style>
        .rich-text-editor-placeholder {
            height: 200px;
            border: 1px solid var(--ark-gray-300);
            padding: var(--space-sm);
            border-radius: var(--border-radius-md);
            background-color: var(--ark-gray-50);
            color: var(--ark-gray-700);
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <aside class="sidebar">
             <img src="../assets/images/ark_logo.png" alt="Ark CMS Logo" class="logo">
            <nav class="sidebar-nav">
                <span class="nav-section-title">[Data Fiduciary Name]</span>
                <ul>
                    <li><a href="df_admin_dashboard.html"><span class="material-symbols-outlined">dashboard</span> Dashboard</a></li>
                </ul>
                <span class="nav-section-title">Consent Management</span>
                <ul>
                    <li><a href="df_admin_notices.html" class="active"><span class="material-symbols-outlined">feed</span> Notices</a></li>
                    <li><a href="df_admin_purposes.html"><span class="material-symbols-outlined">target</span> Purposes</a></li>
                    <!-- ... other nav items ... -->
                </ul>
                 <!-- ... other DF Admin nav sections ... -->
                  <span class="nav-section-title">Data Principal Mgt.</span>
                 <ul>
                    <li><a href="df_admin_dp_requests.html"><span class="material-symbols-outlined">rule_settings</span> DP Requests</a></li>
                    <li><a href="df_admin_grievances.html"><span class="material-symbols-outlined">support_agent</span> Grievances</a></li>
                    <li><a href="df_admin_data_principals.html"><span class="material-symbols-outlined">group</span> Data Principals</a></li>
                </ul>
                <span class="nav-section-title">Organization Settings</span>
                <ul>
                    <li><a href="df_admin_profile.html"><span class="material-symbols-outlined">business</span> DF Profile</a></li>
                    <li><a href="df_admin_user_management.html"><span class="material-symbols-outlined">manage_accounts</span> User Management</a></li>
                    <li><a href="df_admin_processors.html"><span class="material-symbols-outlined">hub</span> Data Processors</a></li>
                    <li><a href="df_admin_activities.html"><span class="material-symbols-outlined">schema</span> Processing Activities</a></li>
                    <li><a href="df_admin_exemptions.html"><span class="material-symbols-outlined">gavel</span> Exemptions</a></li>
                </ul>
                 <span class="nav-section-title">Integrations</span>
                <ul>
                    <li><a href="df_admin_api_keys.html"><span class="material-symbols-outlined">key</span> API Keys</a></li>
                    <li><a href="#"><span class="material-symbols-outlined">webhook</span> Webhooks (Future)</a></li>
                    <li><a href="df_admin_cookie_banner_config.html"><span class="material-symbols-outlined">cookie</span> Cookie Banner</a></li>
                </ul>
                <span class="nav-section-title">Reporting & Audit</span>
                <ul>
                    <li><a href="df_admin_reports.html"><span class="material-symbols-outlined">assessment</span> Reports</a></li>
                    <li><a href="df_admin_audit_logs.html"><span class="material-symbols-outlined">policy</span> Audit Logs</a></li>
                </ul>
                 <span class="nav-section-title">Help</span>
                <ul>
                    <li><a href="#"><span class="material-symbols-outlined">help_outline</span> Help/Support</a></li>
                </ul>
                 <div class="sidebar-footer" style="margin-top: auto;">
                     <a href="df_admin_login.html" class="btn btn-secondary btn-full-width"><span class="material-symbols-outlined">logout</span> Logout</a>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <header class="app-header">
                <div class="hamburger-menu">
                    <span class="material-symbols-outlined">menu</span>
                </div>
                <h1 class="page-title">Notice Details - <span id="noticeVersionDisplay">NOTICE_V2.1</span></h1>
                <div class="user-menu">
                    <div class="user-menu-trigger">
                        <div class="avatar">AD</div>
                        <span class="user-name-display ark-body-default">[DF Admin Name]</span>
                        <span class="material-symbols-outlined">arrow_drop_down</span>
                    </div>
                    <div class="user-menu-dropdown">
                         <a href="df_admin_profile.html">My Profile</a>
                        <a href="df_admin_login.html">Logout</a>
                    </div>
                </div>
            </header>

            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="ark-body-small" style="display: flex; list-style: none; padding: 0;">
                    <li><a href="df_admin_notices.html" class="ark-link">Consent Notices</a></li>
                    <li class="ark-body-small" style="margin: 0 var(--space-xs); color: var(--ark-gray-500);">></li>
                    <li class="ark-body-small" aria-current="page" id="breadcrumbNoticeVersion">NOTICE_V2.1</li>
                </ol>
            </nav>

            <div class="card mb-4">
                <div class="card-header d-flex justify-between align-center">
                    <h2 class="ark-h3">Notice Information</h2>
                    <button class="btn btn-secondary btn-sm" id="toggleNoticeStatusBtn" onclick="toggleNoticeStatus()">
                        <span class="material-symbols-outlined" id="noticeStatusIcon">toggle_off</span>
                        <span id="noticeStatusText">Deactivate Notice</span>
                    </button>
                </div>
                <div class="card-content">
                    <p class="ark-body-default"><strong>Notice ID/Version:</strong> <span id="infoNoticeVersion">NOTICE_V2.1</span></p>
                    <p class="ark-body-default"><strong>Created Date:</strong> [YYYY-MM-DD]</p>
                    <p class="ark-body-default"><strong>Status:</strong> <span class="badge badge-success" id="infoNoticeStatus">Active</span></p>
                </div>
            </div>

            <div class="card mb-4 tabs">
                <div class="card-header">
                    <h2 class="ark-h3">Notice Translations</h2>
                     <div class="tab-list">
                        <div class="tab-item active" data-tab="lang-en">English (EN)</div>
                        <div class="tab-item" data-tab="lang-hi">Hindi (HI)</div>
                        <button class="btn btn-sm btn-subtle" style="margin-left: auto;" data-modal-target="addLanguageModal"><span class="material-symbols-outlined">add</span> Add Language</button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="tab-panel active" id="lang-en">
                        <h4 class="ark-h4">English Content</h4>
                        <p class="ark-body-small mb-2">Ensure the notice includes all elements required by Sec 5 (purpose, data collected, rights, etc.).</p>
                        <div class="form-group">
                            <label for="noticeContentEn" class="ark-label">Notice Text (EN)</label>
                            <div class="rich-text-editor-placeholder" contenteditable="true" id="noticeContentEn">
                                <p>This is the English version of the consent notice for [Data Fiduciary Name]. We collect your personal data for the following purposes: [List purposes here]. You have the right to withdraw your consent, access your data, and request correction or erasure. You can make a complaint to the Data Protection Board. For more details, contact our DPO at [DPO Email].</p>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" onclick="alert('English content saved (Mock)')">Save English Content</button>
                    </div>
                    <div class="tab-panel" id="lang-hi">
                        <h4 class="ark-h4">Hindi Content</h4>
                        <p class="ark-body-small mb-2">यह नोटिस धारा 5 की सभी आवश्यकताओं को पूरा करता है (उद्देश्य, एकत्र किया गया डेटा, अधिकार, आदि)।</p>
                        <div class="form-group">
                            <label for="noticeContentHi" class="ark-label">सूचना पाठ (HI)</label>
                            <div class="rich-text-editor-placeholder" contenteditable="true" id="noticeContentHi">
                                <p>[डेटा फिड्यूशरी का नाम] के लिए सहमति सूचना का यह हिंदी संस्करण है। हम निम्नलिखित उद्देश्यों के लिए आपका व्यक्तिगत डेटा एकत्र करते हैं: [यहां उद्देश्य सूचीबद्ध करें]। आपको अपनी सहमति वापस लेने, अपने डेटा तक पहुंचने और सुधार या मिटाने का अनुरोध करने का अधिकार है। आप डेटा संरक्षण बोर्ड से शिकायत कर सकते हैं। अधिक जानकारी के लिए, हमारे डीपीओ से [डीपीओ ईमेल] पर संपर्क करें।</p>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" onclick="alert('Hindi content saved (Mock)')">Save Hindi Content</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="ark-h3">Linked Purposes</h2>
                </div>
                <div class="card-content">
                    <p class="ark-body-default mb-2">Select the purposes covered by this notice version.</p>
                    <div class="form-group">
                        <label for="availablePurposes" class="ark-label">Available Purposes:</label>
                        <select multiple class="form-control" id="availablePurposes" size="5">
                            <option value="p3">[Analytics & Reporting]</option>
                            <option value="p4">[Customer Support Enhancement]</option>
                        </select>
                    </div>
                    <div class="d-flex justify-center my-2" style="gap: var(--space-sm);">
                        <button class="btn btn-secondary btn-sm" onclick="moveOptions('availablePurposes', 'selectedPurposes')">→ Add</button>
                        <button class="btn btn-secondary btn-sm" onclick="moveOptions('selectedPurposes', 'availablePurposes')">← Remove</button>
                    </div>
                    <div class="form-group">
                        <label for="selectedPurposes" class="ark-label">Selected Purposes for this Notice:</label>
                        <select multiple class="form-control" id="selectedPurposes" size="5">
                            <option value="p1">[Account Creation & Management]</option>
                            <option value="p2">[Marketing Communication]</option>
                        </select>
                    </div>
                    <button class="btn btn-primary mt-3" onclick="alert('Purpose linkage saved (Mock)')">Save Purpose Linkage</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Language Modal -->
    <div class="modal-overlay" id="addLanguageModal">
        <div class="modal-container" style="max-width: 400px;">
            <div class="modal-header">
                <h3 class="modal-title ark-h3">Add Language Translation</h3>
                <button class="modal-close-btn"><span class="material-symbols-outlined">close</span></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="selectLanguage" class="ark-label">Select Language:</label>
                    <select id="selectLanguage" class="form-control">
                        <option value="ta">Tamil (TA)</option>
                        <option value="bn">Bengali (BN)</option>
                        <!-- Populate with other 8th Schedule languages -->
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close-btn">Cancel</button>
                <button class="btn btn-primary" onclick="alert('Language added and tab created (Mock)')">Add Language</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/main.js"></script>
    <script>
        populateUserSpecificElements("DF Admin User");

        // Mock data for notice details page based on query param
        const urlParams = new URLSearchParams(window.location.search);
        const noticeId = urlParams.get('id') || 'NOTICE_V2.1'; // Default if no ID
        document.getElementById('noticeVersionDisplay').textContent = noticeId;
        document.getElementById('breadcrumbNoticeVersion').textContent = noticeId;
        document.getElementById('infoNoticeVersion').textContent = noticeId;

        let isNoticeActive = noticeId === 'NOTICE_V2.1'; // Mock active status

        function updateNoticeStatusButton() {
            const statusBtn = document.getElementById('toggleNoticeStatusBtn');
            const statusIcon = document.getElementById('noticeStatusIcon');
            const statusText = document.getElementById('noticeStatusText');
            const infoStatus = document.getElementById('infoNoticeStatus');

            if (isNoticeActive) {
                statusIcon.textContent = 'toggle_off';
                statusText.textContent = 'Deactivate Notice';
                infoStatus.textContent = 'Active';
                infoStatus.className = 'badge badge-success';
            } else {
                statusIcon.textContent = 'toggle_on';
                statusText.textContent = 'Activate Notice';
                infoStatus.textContent = 'Inactive';
                infoStatus.className = 'badge badge-neutral';
            }
        }
        updateNoticeStatusButton(); // Initial call

        function toggleNoticeStatus() {
            isNoticeActive = !isNoticeActive;
            updateNoticeStatusButton();
            alert(`Notice status changed to ${isNoticeActive ? 'Active' : 'Inactive'} (Mock)`);
        }

        function moveOptions(sourceId, destId) {
            const sourceList = document.getElementById(sourceId);
            const destList = document.getElementById(destId);
            Array.from(sourceList.selectedOptions).forEach(option => {
                destList.appendChild(option);
            });
        }
    </script>
</body>
</html>